<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="UTF-8">









  
  
  
    
  


  


  


  










  <title>OpenBuild å®˜ç½‘é‡æ„ - æ¬§é›·å…±äº«çš„å†…å®¹</title>


  <meta property="og:title" content="OpenBuild å®˜ç½‘é‡æ„">




  
    
  


  <meta name="keywords" content="æ¬§é›·,æ¬§é›·æµ">


<!-- é¡µé¢æ¸²æŸ“å…¼å®¹æ€§ -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- è®¢é˜… -->

<meta name="theme-color" content="#0871ab">
<link rel="shortcut icon" href="/images/ksio/favicon.ico">


    
<link rel="stylesheet" href="/stylesheets/global.css">

    
<link rel="stylesheet" href="/stylesheets/ksio/vendors/share.css">

<link rel="stylesheet" href="/local/syntax-highlighting.css">

    
<script src="/javascripts/ksio/vendors/jquery-1.11.3.min.js"></script>

    
<script src="/javascripts/ksio/vendors/bootstrap.min.js"></script>

  </head>
  
  
  <body class="Page" itemscope itemtype="http://schema.org/WebPage">
    

  <header class="Page-header">
  <div class="navbar navbar-static-top">
    <div class="container">
      <div class="navbar-header">
        
          <button class="navbar-toggle collapsed" type="button" data-target=".Page-navs" data-toggle="collapse">
            <span class="sr-only">Toggle navs</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        
        
          <div class="navbar-brand">


  <a href="https://ourai.ws/?utm_source=https://s.ourai.ws&utm_medium=brand" target="_blank" rel="external nofollow">Ourai.WS</a><a href="/">å…±äº«</a>

</div>
        
      </div>
      <!-- Nav menus -->
      <nav class="Page-navs navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          
  
    <li><a href="https://ourai.ws/?utm_source=https://s.ourai.ws&amp;utm_medium=common-header" target="_blank" rel="external nofollow">ä¸»ç«™</a>
</li>
  

  
    <li class="dropdown">
      <a class="dropdown-toggle" href="javascript:void(0);" data-toggle="dropdown">å…³äº <span class="caret"></span></a>
      <ul class="dropdown-menu">
  
    <li><a href="https://linxoid.com/ourai/?utm_source=https://s.ourai.ws&amp;utm_medium=common-header" target="_blank" rel="external nofollow">ç«™é•¿</a>
</li>
  

  
    <li><a href="https://ourai.ws/sponsor/?utm_source=https://s.ourai.ws&amp;utm_medium=common-header" target="_blank" rel="external nofollow">èµåŠ©</a>
</li>
  

  
    <li><a href="https://yaol.in/cooperation/?utm_source=https://s.ourai.ws&amp;utm_medium=common-header" target="_blank" rel="external nofollow">åˆä½œ</a>
</li>
  

</ul>
    </li>
  


        </ul>
      </nav>
    </div>
  </div>
</header>

<main class="Page-content">
  

  <!-- å†…å®¹ä¸»ä½“ -->
  <div class="container">
    <article class="Page-main Article">
      <header class="Article-header">
        
  
    <h1 class="Article-title">OpenBuild å®˜ç½‘é‡æ„</h1>
  
  


      </header>
      <div class="Article-content col-md-9"><p>å°† OpenBuild å®˜ç½‘é¡¹ç›®å‰ç«¯å·¥ç¨‹é‡æ„ä¸ºå¯é¢å‘ç¤¾åŒºå¼€æºçš„çŠ¶æ€ï¼Œå³æ‹¿å‡ºå»ä¸è‡³äºä¸¢è„¸ï¼Œç”šè‡³è¦è®©ä»–äººçœ‹åˆ°åæƒŠå‘¼èµå¹ï¼ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<p>å› è€Œï¼Œæ‰€è¦æ»¡è¶³çš„æ¡ä»¶å¤§è‡´æ˜¯ï¼š</p>
<ol>
<li>é‡‡ç”¨<a target="_blank" rel="noopener" href="https://ourai.ws/posts/patterns-of-directory-structure-in-frontend-projects/#section-4">ã€Œæ¨¡å—åŒ–ã€æ¨¡å¼</a>é‡æ–°åˆ’åˆ†ç›®å½•ç»“æ„ï¼Œå°†æ ¸å¿ƒæ¨¡å—ä¸åŠŸèƒ½è¿ç§»é€‚é…è¿‡å»ï¼›</li>
<li>åˆ‡æ¢åˆ° TypeScript å¼€å‘ï¼›</li>
<li>å¼•å…¥ <a target="_blank" rel="noopener" href="https://handiejs.github.io/">Handie</a> çš„é…ç½®é©±åŠ¨å¼€å‘æ¨¡å¼ã€‚</li>
</ol>
<p>æˆ‘ä¼šæœ€å¤§é™åº¦å¤ç”¨è‡ªå·±è¿‡å¾€çš„ç»éªŒä¸ç§¯ç´¯ï¼Œåœ¨è¿™è¿‡ç¨‹ä¸­å€¼å¾—è®°å½•çš„ç‚¹éƒ½ä¼šå†™åœ¨ã€Š<a target="_blank" rel="noopener" href="https://juejin.cn/column/7410999714428354587">å‰ç«¯é“²ğŸ’©æ—¥è®°</a>ã€‹ä¸­ã€‚ğŸ˜ğŸ˜ğŸ˜</p>
<h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><p>äº†è§£é¡¹ç›®ä»£ç ä¸æ¢³ç†å®˜ç½‘åŠŸèƒ½ã€‚</p>
<h3 id="å½“å‰æŠ€æœ¯æ ˆ"><a href="#å½“å‰æŠ€æœ¯æ ˆ" class="headerlink" title="å½“å‰æŠ€æœ¯æ ˆ"></a>å½“å‰æŠ€æœ¯æ ˆ</h3><p>æ•´ä¸ªå·¥ç¨‹ä»¥ <a target="_blank" rel="noopener" href="https://react.dev/">React</a>ã€<a target="_blank" rel="noopener" href="https://nextjs.org/">Next.js</a> ä½œä¸ºåº•å±‚ä¾èµ–ï¼Œå…¶ä»–ç”¨åˆ°çš„åº“ä¸»è¦æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»åˆ«</th>
<th>åº“&#x2F;æ¡†æ¶</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>å·¥å…·</td>
<td><a target="_blank" rel="noopener" href="https://lodash.com/">Lodash</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://github.com/validatorjs/validator.js">validator.js</a></td>
<td>å­—ç¬¦ä¸²æ¨¡å¼æ ¡éªŒï¼Œæå°‘ç”¨åˆ°ï¼Œ<strong>å¯ä½æˆæœ¬ç§»é™¤</strong></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://zelark.github.io/nano-id-cc/">Nano ID</a></td>
<td>éšæœº ID ç”Ÿæˆå™¨ï¼Œæå°‘ç”¨åˆ°ï¼Œ<strong>å¯ä½æˆæœ¬ç§»é™¤</strong></td>
</tr>
<tr>
<td>æ•°æ®å¤„ç†</td>
<td><a target="_blank" rel="noopener" href="https://react-redux.js.org/">React Redux</a></td>
<td>å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œ<strong>ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://react.dev/reference/react/useReducer"><code>useReducer</code></a> æ›¿ä»£æˆ–å®Œå…¨ä¸ç”¨çŠ¶æ€ç®¡ç†</strong></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://www.react-hook-form.com/">React Hook Form</a></td>
<td>è¡¨å•æ•°æ®å¤„ç†</td>
</tr>
<tr>
<td>UI</td>
<td><a target="_blank" rel="noopener" href="https://tailwindcss.com/">Tailwind CSS</a></td>
<td>åŸå­ CSS å·¥å…·ç±»</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://heroicons.com/">Heroicons</a></td>
<td>SVG å›¾æ ‡</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://headlessui.com/v1">Headless UI</a></td>
<td>æ— æ ·å¼ç»„ä»¶</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://daisyui.com/">daisyUI</a></td>
<td>åŸºäº Tailwind CSS çš„ç±» <a target="_blank" rel="noopener" href="https://getbootstrap.com/">Bootstrap</a> CSS ç»„ä»¶</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://styled-components.com/">styled-components</a></td>
<td>åˆ©ç”¨ ES æ¨¡æ¿å­—ç¬¦ä¸²å†™æ ·å¼çš„ç»„ä»¶ï¼Œæå°‘ç”¨åˆ°ï¼Œ<strong>å¯ä½æˆæœ¬ç§»é™¤</strong></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://nextui.org/">NextUI</a></td>
<td>UI ç»„ä»¶</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://bytemd.js.org/">ByteMD</a></td>
<td>Markdown å†…å®¹ç¼–è¾‘</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://surveyjs.io/">SurveyJS</a></td>
<td>é—®å·è¡¨å•</td>
</tr>
<tr>
<td>åŠ¨ç”»</td>
<td><a target="_blank" rel="noopener" href="https://michalsnik.github.io/aos/">aos</a></td>
<td>æ»šåŠ¨åŠ¨ç”»</td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://animate.style/">Animate.css</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://www.framer.com/motion/">Framer Motion</a></td>
<td></td>
</tr>
<tr>
<td>Web3</td>
<td><a target="_blank" rel="noopener" href="https://www.rainbowkit.com/">RainbowKit</a></td>
<td></td>
</tr>
<tr>
<td></td>
<td><a target="_blank" rel="noopener" href="https://wagmi.sh/">Wagmi</a></td>
<td></td>
</tr>
</tbody></table>
<p>å…¶ä¸­ï¼Œæœ‰äº›å¾ˆå°‘ç”¨åˆ°æˆ–èŒè´£æœ‰å†²çªï¼Œè€ƒè™‘ç§»é™¤ï¼›å¹¶ä¸”ï¼ŒåŸä»£ç è·Ÿ Next.js è€¦åˆè¾ƒç´§ï¼Œä¸ä¾¿äºæ—¥åè¿å‡ºï¼ŒäºŸéœ€æ¾ç»‘ã€‚</p>
<h3 id="å·¥ç¨‹ç›®å½•ç»“æ„"><a href="#å·¥ç¨‹ç›®å½•ç»“æ„" class="headerlink" title="å·¥ç¨‹ç›®å½•ç»“æ„"></a>å·¥ç¨‹ç›®å½•ç»“æ„</h3><p>ç›®å‰ï¼Œå‰ç«¯å·¥ç¨‹çš„ç›®å½•ç»“æ„å¤§ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">project<br>   â”œâ”€â”€ app<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ components<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ constants<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ hooks<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ lib<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ services<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ state<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ styleds<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ styles<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ utils<br>   â”‚   â””â”€â”€ ...<br>   â””â”€â”€ ...<br></code></pre></td></tr></table></figure>

<p>è¿™æ˜¯å¦¥å¦¥çš„ã€Œé‡ç”Ÿã€æ¨¡å¼ï¼Œå¯ä»¥è¯´<a target="_blank" rel="noopener" href="https://ourai.ws/posts/patterns-of-directory-structure-in-frontend-projects/#section-2">è¯¥æ¨¡å¼æ‰€å¸¦æ¥çš„é—®é¢˜</a>åœ¨é¡¹ç›®é‡Œå‡ ä¹éƒ½å…·å¤‡äº†â€¦â€¦ğŸ˜©ğŸ˜©ğŸ˜©</p>
<h3 id="ä»£ç ç¼–å†™é—®é¢˜"><a href="#ä»£ç ç¼–å†™é—®é¢˜" class="headerlink" title="ä»£ç ç¼–å†™é—®é¢˜"></a>ä»£ç ç¼–å†™é—®é¢˜</h3><p>é™¤äº†ä¸Šè¿°ã€Œé‡ç”Ÿã€æ¨¡å¼æ‰€å¸¦æ¥çš„å¸¸è§é—®é¢˜å¤–ï¼Œè¿˜å­˜åœ¨ä¸€äº›å…¶ä»–é—®é¢˜ï¼š</p>
<ul>
<li>é¡µé¢æ–‡ä»¶ä¸­æœ‰ HTTP API è¯·æ±‚çš„æ‹¼è£…é€»è¾‘ï¼›</li>
<li>ç•Œé¢æ¸²æŸ“çš„ä»£ç ä¸­å……æ–¥ç€ Tailwind CSS çš„ç±»åï¼›</li>
<li>å¾ˆå¤šéå¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼ŒåŒæ—¶å¯¼è‡´å‘èµ·å¤šæ¬¡é‡å¤è¯·æ±‚ï¼›</li>
<li>åˆ—è¡¨åŠ è½½ä¸ç¿»é¡µé€»è¾‘å¤§é‡å†—ä½™ï¼›</li>
<li>é€šç”¨çš„ UI ç»„ä»¶æ— æ³•ç›´è§‚åœ°åŒºåˆ†å‡ºæ˜¯ client onlyã€server only è¿˜æ˜¯ä¸¤è€…å…¼å®¹çš„ï¼›</li>
<li>å“ªäº›éƒ¨åˆ†è¯¥æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå“ªäº›è¯¥å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œå¹¶æ²¡æœ‰å¾ˆå¥½åœ°åˆ’åˆ†ä¸ä¼˜åŒ–ï¼›</li>
<li>â€¦â€¦</li>
</ul>
<p>æ€»è€Œè¨€ä¹‹ï¼Œæ»¥ç”¨ React Hooks æœºåˆ¶ï¼Œå‡ ä¹æ²¡æœ‰æŠ½è±¡ï¼Œå°è£…æ€§æå·®ï¼Œæ— è®ºæ˜¯å¼€å‘è€…ä½“éªŒè¿˜æ˜¯ç”¨æˆ·ä½“éªŒéƒ½å¾ˆçƒ‚ï¼</p>
<h3 id="ä¸šåŠ¡åŠŸèƒ½æ¨¡å—"><a href="#ä¸šåŠ¡åŠŸèƒ½æ¨¡å—" class="headerlink" title="ä¸šåŠ¡åŠŸèƒ½æ¨¡å—"></a>ä¸šåŠ¡åŠŸèƒ½æ¨¡å—</h3><p>TODO</p>
<h2 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h2><p>åŸºäºè§„èŒƒã€çº¦å®šã€æ¥å£ç­‰ã€Œå…±è¯†ã€ç¼–ç¨‹ã€‚</p>
<h3 id="è°ƒæ•´ç›®å½•ç»“æ„"><a href="#è°ƒæ•´ç›®å½•ç»“æ„" class="headerlink" title="è°ƒæ•´ç›®å½•ç»“æ„"></a>è°ƒæ•´ç›®å½•ç»“æ„</h3><p>åœ¨<a target="_blank" rel="noopener" href="https://ourai.ws/posts/patterns-of-directory-structure-in-frontend-projects/#section-4">ã€Œæ¨¡å—åŒ–ã€æ¨¡å¼</a>çš„åŸºç¡€ä¸Šï¼Œæ ¹æ® Next.js çš„é™åˆ¶è¿›è¡Œäº›è®¸å…¼å®¹é€‚é…ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">project/src<br>   â”œâ”€â”€ app<br>   â”‚   â””â”€â”€ ...<br>   â”œâ”€â”€ domain<br>   â”‚   â””â”€â”€ [domain-specific-module]<br>   â”‚       â”œâ”€â”€ views<br>   â”‚       â”‚   â”œâ”€â”€ [detail-view]<br>   â”‚       â”‚   â”‚   â”œâ”€â”€ [DetailViewWidget].tsx<br>   â”‚       â”‚   â”‚   â”œâ”€â”€ ...<br>   â”‚       â”‚   â”‚   â””â”€â”€ style.scss<br>   â”‚       â”‚   â”œâ”€â”€ [form-view]<br>   â”‚       â”‚   â”‚   â”œâ”€â”€ [FormViewWidget].tsx<br>   â”‚       â”‚   â”‚   â”œâ”€â”€ ...<br>   â”‚       â”‚   â”‚   â””â”€â”€ style.scss<br>   â”‚       â”‚   â””â”€â”€ [list-view]<br>   â”‚       â”‚       â”œâ”€â”€ [ListViewWidget].tsx<br>   â”‚       â”‚       â”œâ”€â”€ ...<br>   â”‚       â”‚       â””â”€â”€ style.scss<br>   â”‚       â”œâ”€â”€ widgets<br>   â”‚       â”‚   â””â”€â”€ [domain-specific-widget]<br>   â”‚       â”‚       â””â”€â”€ ...<br>   â”‚       â”œâ”€â”€ helper.ts<br>   â”‚       â”œâ”€â”€ index.ts<br>   â”‚       â”œâ”€â”€ model.ts<br>   â”‚       â”œâ”€â”€ repository.ts<br>   â”‚       â””â”€â”€ ...<br>   â”œâ”€â”€ shared<br>   â”‚   â”œâ”€â”€ components<br>   â”‚   â”‚   â”‚   â”œâ”€â”€ control<br>   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...<br>   â”‚   â”‚   â”‚   â””â”€â”€ ...<br>   â”‚   â”‚   â””â”€â”€ ...<br>   â”‚   â”œâ”€â”€ utils<br>   â”‚   â”‚   â””â”€â”€ ...<br>   â”‚   â”œâ”€â”€ styles<br>   â”‚   â”‚   â””â”€â”€ ...<br>   â”‚   â””â”€â”€ ...<br>   â””â”€â”€ ...<br></code></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼Œ<code>app</code> å–ä»£äº† <code>entry</code> æ–‡ä»¶å¤¹ä½œä¸ºé¡µé¢æ¸²æŸ“çš„å…¥å£ã€‚</p>
<p>åœ¨æ–‡ä»¶å¼•ç”¨å±‚é¢æœ‰æ‰€é™åˆ¶ï¼š</p>
<ul>
<li><code>shared</code> æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸å¯å¼•ç”¨é™¤ <code>public</code> ä¹‹å¤–çš„ä»»ä½•å…¶ä»–å¤–éƒ¨æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼›</li>
<li><code>domain</code> æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä»…å¯å¼•ç”¨ <code>public</code>ã€<code>shared</code> å’Œå…¶ä»– <code>domain</code> æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼›</li>
<li><code>app</code> æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å¯å¼•ç”¨ <code>public</code>ã€<code>shared</code>ã€<code>domain</code> åŠåŒæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ã€‚</li>
</ul>
<p>ä½¿ç”¨ <code>@/*</code> å¼•ç”¨ <code>shared</code> ä¸‹çš„æ–‡ä»¶ã€‚</p>
<h3 id="æ‹†åˆ†ä¸šåŠ¡æ¨¡å—"><a href="#æ‹†åˆ†ä¸šåŠ¡æ¨¡å—" class="headerlink" title="æ‹†åˆ†ä¸šåŠ¡æ¨¡å—"></a>æ‹†åˆ†ä¸šåŠ¡æ¨¡å—</h3><p>TODO</p>
<h3 id="é‡å¡‘æŠ€æœ¯æ ˆ"><a href="#é‡å¡‘æŠ€æœ¯æ ˆ" class="headerlink" title="é‡å¡‘æŠ€æœ¯æ ˆ"></a>é‡å¡‘æŠ€æœ¯æ ˆ</h3><p>é€šç”¨ UI å¼€å‘ä»¥ Tailwind CSSã€daisyUIã€Headless UI è¿™ä¸‰è€…æ­é…ä½¿ç”¨ä¸ºä¸»ï¼Œäº¤äº’ä¸Šçš„ä¸è¶³ä¹‹å¤„ç”± NextUI ç­‰åŸå­ç»„ä»¶å¼¥è¡¥ï¼Œä½† styled-components è¿™ç§ä»ã€Œæ€æƒ³ã€å±‚é¢ç›¸æ‚–çš„åšå†³ç§»é™¤ã€‚</p>
<p><strong>ä»¥ã€Œç»„ä»¶ã€è€Œéã€ŒCSS ç±»ã€çš„å½¢å¼å‘å¤–é€å‡º</strong>ï¼ŒåŸºäºå®ƒä»¬å°è£…å‡ºã€Œé¡¹ç›®çº§ã€çš„é€šç”¨ UI ç»„ä»¶æ”¾åœ¨ <code>src/shared/components/control</code> æ–‡ä»¶å¤¹ä¸­ï¼ŒAPI å°½é‡å…¼å®¹ <a target="_blank" rel="noopener" href="https://petals-ui.github.io/">Petals</a> ä¸­å®šä¹‰çš„ã€‚</p>
<p>å›¾æ ‡ä½¿ç”¨ Heroicons å’Œè‡ªå®šä¹‰çš„ï¼Œä¼˜å…ˆç”¨ SVG React ç»„ä»¶çš„å½¢å¼ï¼Œå¯ç”¨ <a target="_blank" rel="noopener" href="https://fontawesome.com/">Font Awesome</a> ä½œä¸ºå€™è¡¥ã€‚</p>
<h3 id="è¯·æ±‚ç®¡ç†"><a href="#è¯·æ±‚ç®¡ç†" class="headerlink" title="è¯·æ±‚ç®¡ç†"></a>è¯·æ±‚ç®¡ç†</h3><p>å¯¹ HTTP API å’Œæ™ºèƒ½åˆçº¦ ABI è¿›è¡Œç»Ÿä¸€æ§åˆ¶ã€‚</p>
<h4 id="HTTP-API"><a href="#HTTP-API" class="headerlink" title="HTTP API"></a>HTTP API</h4><p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://axios-http.com/">Axios</a> å°è£…æ‹¥æœ‰<a target="_blank" rel="noopener" href="https://axios-http.com/docs/api_intro#request-method-aliases">ä¾¿æ·æ–¹æ³•</a>çš„æ„é€ å‡½æ•°ä»¥å‘èµ· HTTP API è¯·æ±‚ï¼Œå¹¶åˆ›å»ºä¸¤ä¸ªå®ä¾‹å»æ”¯æŒä»¥ <code>/v1</code> å’Œ <code>/ts/v1</code> å¼€å¤´çš„è¯·æ±‚åœ°å€ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HttpClient</span>(<span class="hljs-params">config</span>) &#123;&#125;<br><br><span class="hljs-comment">// è¯·æ±‚ä¾¿æ·æ–¹æ³•</span><br><span class="hljs-title class_">HttpClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-function">(<span class="hljs-params">url, config</span>) =&gt;</span> &#123;&#125;<br><span class="hljs-title class_">HttpClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">post</span> = <span class="hljs-function">(<span class="hljs-params">url, data, config</span>) =&gt;</span> &#123;&#125;<br><br><span class="hljs-comment">// æ·»åŠ è¯·æ±‚è¿”å›æ‹¦æˆªå™¨</span><br><span class="hljs-title class_">HttpClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">use</span> = <span class="hljs-function">(<span class="hljs-params">interceptor</span>) =&gt;</span> &#123;&#125;<br><br><span class="hljs-keyword">const</span> legacyClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>(&#123; <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">&#x27;/v1&#x27;</span> &#125;);<br><span class="hljs-keyword">const</span> httpClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>(&#123; <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">&#x27;/ts/v1&#x27;</span> &#125;);<br><br><span class="hljs-keyword">export</span> &#123; legacyClient &#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> httpClient;<br></code></pre></td></tr></table></figure>

<h4 id="æ™ºèƒ½åˆçº¦-ABI"><a href="#æ™ºèƒ½åˆçº¦-ABI" class="headerlink" title="æ™ºèƒ½åˆçº¦ ABI"></a>æ™ºèƒ½åˆçº¦ ABI</h4><p>å¯¹æ™ºèƒ½åˆçº¦ ABI çš„è°ƒç”¨ä½¿ç”¨ <code>obj.method(params)</code> çš„å½¢å¼æ›¿ä»£ <code>readContract(config, &#123; address, abi, functionName, args &#125;)</code>ï¼Œè¿™æ ·æ›´ç¬¦åˆç›´è§‰ä¸”æ›´ç®€æ´ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æ„é€ ä¸€ä¸ªæ‹¥æœ‰ ABI æ–¹æ³•çš„å¯¹è±¡</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">constructMethods</span>(<span class="hljs-params">addr, abi</span>) &#123;&#125;<br><br><span class="hljs-comment">// æ·»åŠ è¯·æ±‚è¿”å›æ‹¦æˆªå™¨</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setInterceptor</span>(<span class="hljs-params">interceptor</span>) &#123;&#125;<br><br><span class="hljs-keyword">export</span> &#123; constructMethods, setInterceptor &#125;;<br></code></pre></td></tr></table></figure>

<h4 id="è¯·æ±‚è¿”å›ç»“æ„"><a href="#è¯·æ±‚è¿”å›ç»“æ„" class="headerlink" title="è¯·æ±‚è¿”å›ç»“æ„"></a>è¯·æ±‚è¿”å›ç»“æ„</h4><p>æ— è®ºæ˜¯ç”¨å“ªç§é€”å¾„å‘èµ·è¯·æ±‚ï¼Œéƒ½å°†è¿”å›ç»“æœè½¬æ¢ä¸º <a target="_blank" rel="noopener" href="https://github.com/future-js/handie/blob/master/packages/runtime-core/src/vendors/organik/core/typing/http.ts#L16-L20">Organik ä¸­å®šä¹‰çš„ç»“æ„</a>ï¼Œå³ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeResponse</span>(<span class="hljs-params">res</span>) &#123;<br>  <span class="hljs-comment">// æ ¹æ® `res` åˆ¤æ–­ï¼Œç»™ä»¥ä¸‹ç»“æ„èµ‹å€¼</span><br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¯å¦é€»è¾‘æˆåŠŸ</span><br>    <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">// é€»è¾‘å¤±è´¥æ—¶çš„æç¤ºä¿¡æ¯</span><br>    <span class="hljs-attr">code</span>: <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-comment">// é€»è¾‘å¤±è´¥æ—¶çš„é”™è¯¯ç¼–ç </span><br>    <span class="hljs-attr">data</span>: [], <span class="hljs-comment">// é€»è¾‘æˆåŠŸæ—¶çš„è¿”å›æ•°æ®</span><br>    <span class="hljs-comment">// é€»è¾‘æˆåŠŸæ—¶çš„é™„åŠ æ•°æ®ï¼Œåˆ†é¡µç­‰ä¿¡æ¯éœ€è¦æŒ‚åœ¨è¿™ä¸ªä¸Šé¢ï¼š</span><br>    <span class="hljs-comment">// `total` æ˜¯æ€»æ¡æ•°ï¼Œ</span><br>    <span class="hljs-comment">// `pageNum` æ˜¯å½“å‰é¡µï¼Œ</span><br>    <span class="hljs-comment">// `pageSize` æ˜¯æ¯é¡µæ¡æ•°</span><br>    <span class="hljs-attr">extra</span>: &#123;&#125;,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç„¶åæ ¹æ®è¯¥ç»“æ„ç»Ÿä¸€å¤„ç†è¯·æ±‚ã€ŒæˆåŠŸã€ä¸ã€Œå¤±è´¥ã€çš„åé¦ˆï¼Œè€Œä¸å¿…åœ¨ä¸šåŠ¡æ¨¡å—ä¸­æŒ¨ä¸ªå•ç‹¬å¤„ç†ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªè¯·æ±‚è¿”å›æ‹¦æˆªå™¨</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleResponse</span>(<span class="hljs-params">res</span>) &#123;<br>  <span class="hljs-keyword">const</span> normalized = <span class="hljs-title function_">normalizeResponse</span>(res);<br><br>  <span class="hljs-keyword">if</span> (!normalized.<span class="hljs-property">success</span>) &#123;<br>    message.<span class="hljs-title function_">error</span>(normalized.<span class="hljs-property">message</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> normalized;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="ä¸šåŠ¡æ¨¡å—è¯·æ±‚"><a href="#ä¸šåŠ¡æ¨¡å—è¯·æ±‚" class="headerlink" title="ä¸šåŠ¡æ¨¡å—è¯·æ±‚"></a>ä¸šåŠ¡æ¨¡å—è¯·æ±‚</h4><p>ä¸šåŠ¡æ¨¡å—ä¸­çš„è¯·æ±‚ä½¿ç”¨ç®€å•å®šä¹‰çš„å¼‚æ­¥å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// é€šè¿‡ HTTP API è·å–åˆ—è¡¨</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getList</span>(<span class="hljs-params">params</span>) &#123;<br>  <span class="hljs-keyword">return</span> legacyClient.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/get/list&#x27;</span>, &#123; params &#125;);<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡æ™ºèƒ½åˆçº¦ ABI è·å–è¯¦æƒ…</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getOne</span>(<span class="hljs-params">params</span>) &#123;<br>  <span class="hljs-keyword">return</span> contractA.<span class="hljs-title function_">getOne</span>(params);<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡ HTTP API æ–°å¢æ•°æ®</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">insertOne</span>(<span class="hljs-params">data</span>) &#123;<br>  <span class="hljs-keyword">return</span> httpClient.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/insert/one&#x27;</span>, data);<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡æ™ºèƒ½åˆçº¦ ABI ä¿®æ”¹æ•°æ®</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateOne</span>(<span class="hljs-params">data</span>) &#123;<br>  <span class="hljs-keyword">return</span> contractB.<span class="hljs-title function_">updateOne</span>(data);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¦‚æ­¤ä¸€æ¥ï¼Œåœ¨è¡¨ç°å±‚ä¸­æ— éœ€æ„ŸçŸ¥åˆ°è¯·æ±‚æ•°æ®çš„å…·ä½“æ¥æºã€‚</p>

</div>
      <footer class="Article-footer col-md-3">
  
  <div class="Widget Widget--share">
    <div class="Widget-body">
      <p>åˆ†äº«åˆ°<i class="fa fa-share-alt"></i></p>
      <div class="social-share" data-sites="wechat,weibo,twitter"></div>
    </div>
  </div>


  <section class="Widget Widget--toc">
  <div class="Widget-header">
    <h2 class="Widget-title">ç›®å½•</h2>
  </div>
  <div class="Widget-body"></div>
</section>


</footer>
      
      
    </article>
    

  </div>
</main>
<footer class="Page-footer Footer">
  <div class="container">
    
    <div class="Footer-description">
      
        <!-- Important links -->
        <nav class="Footer-navs">
          <ul><li><a href="https://meta.ourai.ws/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow"><span>@</span></a>
</li><li><a href="https://ourai.ws/sponsor/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow"><span>èµåŠ©</span></a>
</li><li><a href="https://yaol.in/cooperation/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow"><span>åˆä½œ</span></a>
</li></ul>
        </nav>
      
      
        <!-- Copyright -->
        <div class="Footer-copyright">
          <p>

&copy; 2022-2024 <a href="https://ourai.ws/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow">æ¬§é›·æµ</a> ç‰ˆæƒæ‰€æœ‰

</p>
          <p>æœ¬ç«™ä¸»é¢˜ <a href="https://ourai.github.io/lime/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow">Lime</a> ç”± <a href="https://linxoid.com/ourai/?utm_source=https://s.ourai.ws&amp;utm_medium=common-footer" target="_blank" rel="external nofollow">æ¬§é›·</a> æä¾›</p>
          
        </div>
      
    </div>
  </div>
</footer>





    <script>$('.Article-content > table').addClass('table table-bordered')</script>
    
<script src="/javascripts/ksio/vendors/share.min.js"></script>

<script src="/javascripts/ksio/components/page.js"></script>

<script src="/javascripts/ksio/components/toc.js"></script>

  </body>
</html>

